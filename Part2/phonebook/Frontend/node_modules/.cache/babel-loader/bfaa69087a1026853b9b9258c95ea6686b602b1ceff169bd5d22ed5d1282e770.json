{"ast":null,"code":"import _objectSpread from\"/Users/mohanaditya/Documents/FullStackOpen/Part2/phonebook/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/mohanaditya/Documents/FullStackOpen/Part2/phonebook/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import phoneServices from'./services/phoneServices';import Note from'./components/Note';import{useState,useEffect}from'react';import\"./index.css\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),number=_useState6[0],setNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),failMessageStatus=_useState10[0],setFailMessageStatus=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),addedStatus=_useState12[0],setAddedStatus=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),failMessage=_useState14[0],setFailMessage=_useState14[1];useEffect(function(){phoneServices.getAll().then(function(response){setPersons(response);});},[]);var handelNameChange=function handelNameChange(event){setName(event.target.value);};var handelNumberChange=function handelNumberChange(event){setNumber(event.target.value);};var Added=function Added(_ref){var message=_ref.message;if(addedStatus)return/*#__PURE__*/_jsxs(\"div\",{className:\"message\",children:[\"Added \",message]});};var Failed=function Failed(_ref2){var message=_ref2.message;if(failMessageStatus)return/*#__PURE__*/_jsxs(\"div\",{className:\"failMessage\",children:[\"Information of \",message,\" has already been removed\"]});};var AddNote=function AddNote(event){event.preventDefault();var entry={name:name,number:number};if(persons.map(function(person){return person.name;}).includes(entry.name)){if(window.confirm(\"\".concat(entry.name,\" is already added to phonebook, replace the old number with a new one?\"))){var separatedPerson=persons.find(function(person){return person.name===entry.name;});var updatedPerson=_objectSpread(_objectSpread({},separatedPerson),{},{number:entry.number});phoneServices.update(separatedPerson.id,updatedPerson).then(function(response){setPersons(persons.map(function(person){return person.id!==separatedPerson.id?person:response;}));setMessage(name);setName(\"\");setNumber(\"\");setAddedStatus(true);setTimeout(function(){setAddedStatus(false);},3000);}).catch(function(error){console.log(error);setFailMessage(name);setFailMessageStatus(true);setTimeout(function(){setFailMessageStatus(false);},3000);});}}else{phoneServices.add(entry).then(function(response){setPersons(persons.concat(response));setMessage(name);setName(\"\");setNumber(\"\");setAddedStatus(true);setTimeout(function(){setAddedStatus(false);},3000);});}};var search=function search(event){if(event.target.value.length>0){console.log();var filteredList=persons.filter(function(person){return person.name.toLowerCase().includes(event.target.value.toLowerCase());});setPersons(filteredList);}else{phoneServices.getAll().then(function(response){setPersons(response);});}};var _remove=function remove(person){var id=person.id;if(window.confirm(\"Delete \".concat(person.name,\"?\"))){phoneServices.clear(id).then(function(){return setPersons(persons.filter(function(person){return person.id!==id;}));});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Failed,{message:failMessage}),/*#__PURE__*/_jsx(Added,{message:message}),\"filter shown with\",/*#__PURE__*/_jsx(\"input\",{onChange:search}),/*#__PURE__*/_jsx(\"h3\",{children:\"add a new\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:AddNote,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"newInput\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"name\",name:\"name\",type:\"text\",value:name,onChange:handelNameChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"newInput\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"number\",children:\"Number:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"number\",name:\"phone\",type:\"tel\",value:number,onChange:handelNumberChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"save\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),persons.map(function(person){return/*#__PURE__*/_jsx(Note,{name:person.name,phone:person.number,remove:function remove(){return _remove(person);}},person.id);})]});};export default App;","map":{"version":3,"names":["phoneServices","Note","useState","useEffect","jsxs","_jsxs","jsx","_jsx","App","_useState","_useState2","_slicedToArray","persons","setPersons","_useState3","_useState4","name","setName","_useState5","_useState6","number","setNumber","_useState7","_useState8","message","setMessage","_useState9","_useState10","failMessageStatus","setFailMessageStatus","_useState11","_useState12","addedStatus","setAddedStatus","_useState13","_useState14","failMessage","setFailMessage","getAll","then","response","handelNameChange","event","target","value","handelNumberChange","Added","_ref","className","children","Failed","_ref2","AddNote","preventDefault","entry","map","person","includes","window","confirm","concat","separatedPerson","find","updatedPerson","_objectSpread","update","id","setTimeout","catch","error","console","log","add","search","length","filteredList","filter","toLowerCase","remove","clear","onChange","onSubmit","htmlFor","type","required","phone"],"sources":["/Users/mohanaditya/Documents/FullStackOpen/Part2/phonebook/Frontend/src/App.js"],"sourcesContent":["import phoneServices from './services/phoneServices';\nimport Note from './components/Note';\nimport { useState, useEffect } from 'react';\nimport \"./index.css\";\n\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [number, setNumber] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [failMessageStatus, setFailMessageStatus] = useState(false);\n  const [addedStatus, setAddedStatus] = useState(false);\n  const [failMessage, setFailMessage] = useState(\"\");\n\n  useEffect(() => {\n    phoneServices.getAll().then(response => {\n      setPersons(response);\n    })\n  }, []);\n\n  const handelNameChange = (event) => {\n    setName(event.target.value);\n  }\n\n  const handelNumberChange = (event) => {\n    setNumber(event.target.value);\n  }\n\n  const Added = ({ message }) => {\n    if (addedStatus)\n      return <div className='message'>Added {message}</div>\n  }\n\n  const Failed = ({ message }) => {\n    if (failMessageStatus)\n      return <div className='failMessage'>Information of {message} has already been removed</div>\n  }\n\n  const AddNote = (event) => {\n    event.preventDefault();\n    const entry = {\n      name: name,\n      number: number\n    }\n    if (persons.map(person => person.name).includes(entry.name)) {\n      if (window.confirm(`${entry.name} is already added to phonebook, replace the old number with a new one?`)) {\n        const separatedPerson = persons.find(person => person.name === entry.name);\n        const updatedPerson = { ...separatedPerson, number: entry.number }\n        phoneServices.update(separatedPerson.id, updatedPerson).then(response => {\n          setPersons(persons.map(person => person.id !== separatedPerson.id ? person : response));\n          setMessage(name);\n          setName(\"\");\n          setNumber(\"\");\n          setAddedStatus(true);\n          setTimeout(() => {\n            setAddedStatus(false);\n          }, 3000);\n        }).catch(error => {\n          console.log(error);\n          setFailMessage(name);\n          setFailMessageStatus(true);\n          setTimeout(() => {\n            setFailMessageStatus(false);\n          }, 3000);\n        });\n      }\n    }\n    else {\n      phoneServices.add(entry).then(response => {\n        setPersons(persons.concat(response));\n        setMessage(name);\n        setName(\"\");\n        setNumber(\"\");\n        setAddedStatus(true);\n\n        setTimeout(() => {\n          setAddedStatus(false);\n        }, 3000);\n      })\n    }\n  }\n\n  const search = (event) => {\n    if (event.target.value.length > 0) {\n      console.log()\n      const filteredList = persons.filter(person => person.name.toLowerCase().includes(event.target.value.toLowerCase()));\n      setPersons(filteredList);\n    }\n    else {\n      phoneServices.getAll().then(response => {\n        setPersons(response);\n      })\n    }\n  }\n\n  const remove = (person) => {\n    const id = person.id;\n    if (window.confirm(`Delete ${person.name}?`)) {\n      phoneServices.clear(id).then(() => setPersons(persons.filter(person => person.id !== id)))\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Failed message={failMessage} />\n      <Added message={message} />\n      filter shown with<input onChange={search}></input>\n      <h3>add a new</h3>\n      <form onSubmit={AddNote}>\n        <div className='newInput'>\n          <label htmlFor='name'>Name:</label>\n          <input id=\"name\" name='name' type={\"text\"} value={name} onChange={handelNameChange} required></input>\n        </div>\n        <div className='newInput'>\n          <label htmlFor='number'>Number:</label>\n          <input id=\"number\" name='phone' type={\"tel\"} value={number} onChange={handelNumberChange} required></input>\n        </div>\n        <button type=\"submit\">save</button>\n      </form>\n      <h3>Numbers</h3>\n      {persons.map(person => <Note key={person.id} name={person.name} phone={person.number} remove={() => remove(person)} />)}\n    </div >\n  )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}